document.addEventListener('DOMContentLoaded',()=>{const body=document.body;const nav=document.getElementById('myNav');const themeSwitch=document.getElementById('themeSwitch');const menuButton=document.querySelector('.menu-button');const closeButton=document.querySelector('.closebtn');menuButton?.addEventListener('click',()=>{nav.style.width=nav.style.width==='100%'?'0%':'100%'});closeButton?.addEventListener('click',()=>{nav.style.width='0%'});const applyTheme=(isDark)=>{body.classList.toggle('dark-mode',isDark);themeSwitch.checked=isDark};const savedTheme=localStorage.getItem('theme');if(savedTheme){applyTheme(savedTheme==='dark')}else{const systemPrefersDark=window.matchMedia('(prefers-color-scheme: dark)').matches;applyTheme(systemPrefersDark)}
themeSwitch?.addEventListener('change',()=>{const isDark=themeSwitch.checked;applyTheme(isDark);localStorage.setItem('theme',isDark?'dark':'light')});window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change',e=>{if(!localStorage.getItem('theme')){applyTheme(e.matches)}});const themeSwitchLink=document.querySelector('#themeSwitchLink');themeSwitchLink?.addEventListener('click',(e)=>{e.preventDefault();const currentTheme=document.body.classList.contains('dark-mode')?'dark':'light';const isDark=currentTheme!=='dark';applyThemeFull(isDark);localStorage.setItem('theme',isDark?'dark':'light')});function applyThemeFull(isDark){document.body.classList.toggle('dark-mode',isDark)}
document.querySelectorAll('.time-select').forEach(el=>{el.addEventListener('change',()=>{const time=el.value;if(data){$('#table1').DataTable().clear().destroy();loadScreener(data,time);document.querySelectorAll('.time-select').forEach(ele=>{ele.value=el.value})}})});$('.search-crypto').on('input',function(){$('#table1').DataTable().search($(this).val()).draw()});const swiperOptions=document.querySelector(".swiper.swiper-options");const slides=swiperOptions.querySelectorAll(".swiper-slide");function setSelectedMode(mode){slides.forEach(s=>{const slideMode=s.querySelector(".mode").textContent.trim();if(slideMode===mode){s.classList.add("selected")}else{s.classList.remove("selected")}})}
const slide=document.querySelector('.swiper-slide.saved-only');if(localStorage.getItem("SavedOnly")=="true"){slide.classList.add('star-yellow')}
slides.forEach(slide=>{slide.addEventListener("click",()=>{const mode=slide.querySelector(".mode").textContent.trim();if(mode!=="Saved"){localStorage.setItem("selectedMode",mode);setSelectedMode(mode);loadMode(mode)}else{if(localStorage.getItem("SavedOnly")!="true"){localStorage.setItem("SavedOnly","true");document.querySelector('.swiper-slide.saved-only').classList.add('star-yellow')}else{localStorage.setItem("SavedOnly","false");document.querySelector('.swiper-slide.saved-only').classList.remove('star-yellow')}
loadSavedScreener()}})});window.addEventListener("DOMContentLoaded",()=>{const savedMode=localStorage.getItem("selectedMode")||"Default";setSelectedMode(savedMode);loadMode(savedMode)});loadScreener(data,"week");fadeInEffect(700,'.main-container')})
